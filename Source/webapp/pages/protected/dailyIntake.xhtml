<ui:composition template="/WEB-INF/templates/base.xhtml" 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">
  <ui:define name="title"><h:outputText value="#{msg.intake}" /></ui:define>
  <ui:define name="content">
  <div class="span">
    <h:form>
      <c:forEach items="#{dailyIntakeController.dailyIntakes}" var="intake">
      <div class="data-table-container">
        <table class="daily-intake-table data-table">
          <tr>
            <td style="background: transparent"></td>
            <th>
              <h:outputText value="#{intake.intakeDate}">
                <f:convertDateTime pattern="#{accountController.dateFormat}" />
              </h:outputText>
            </th>
            <c:forEach items="#{intake.meals}" var="meal">
            <th><h:outputText value="#{dailyIntakeController.getMealFact(meal, 'NAME')}" /></th>
            </c:forEach>
            <th><h:outputText value="#{msg.intake_ExpectedTotal}" /></th>
            <th><h:outputText value="#{msg.intake_CurrentTotal}" /></th>
            <th><h:outputText value="#{msg.intake_RemainingTotal}" /></th>
          </tr>
          <tr>
            <th><h:outputText value="#{msg.calories}" /></th>
            <td></td>
            <c:forEach items="#{intake.meals}" var="meal">
            <td><h:outputText value="#{dailyIntakeController.getMealFact(meal, 'CALORIE')}" /></td>
            </c:forEach>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'CALORIE', 'EXPECTED')}" /></td>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'CALORIE', 'CURRENT')}" /></td>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'CALORIE', 'REMAINING')}" /></td>
          </tr>
          <tr>
            <th><h:outputText value="#{msg.fat}" /></th>
            <td></td>
            <c:forEach items="#{intake.meals}" var="meal">
            <td><h:outputText value="#{dailyIntakeController.getMealFact(meal, 'FAT')}" /></td>
            </c:forEach>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'FAT', 'EXPECTED')}" /></td>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'FAT', 'CURRENT')}" /></td>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'FAT', 'REMAINING')}" /></td>
          </tr>
          <tr>
            <th><h:outputText value="#{msg.carbs}" /></th>
            <td></td>
            <c:forEach items="#{intake.meals}" var="meal">
            <td><h:outputText value="#{dailyIntakeController.getMealFact(meal, 'CARBOHYDRATE')}" /></td>
            </c:forEach>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'CARBOHYDRATE', 'EXPECTED')}" /></td>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'CARBOHYDRATE', 'CURRENT')}" /></td>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'CARBOHYDRATE', 'REMAINING')}" /></td>
          </tr>
          <tr>
            <th><h:outputText value="#{msg.protein}" /></th>
            <td></td>
            <c:forEach items="#{intake.meals}" var="meal">
            <td><h:outputText value="#{dailyIntakeController.getMealFact(meal, 'PROTEIN')}" /></td>
            </c:forEach>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'PROTEIN', 'EXPECTED')}" /></td>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'PROTEIN', 'CURRENT')}" /></td>
            <td><h:outputText value="#{dailyIntakeController.calculatedTotal(intake, 'PROTEIN', 'REMAINING')}" /></td>
          </tr>
        </table>
      </div>
      </c:forEach>
    </h:form>
  </div>
  </ui:define>
</ui:composition>