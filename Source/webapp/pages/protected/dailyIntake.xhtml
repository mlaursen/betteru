<ui:composition template="/WEB-INF/templates/base.xhtml" 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">
  <ui:define name="title"><h:outputText value="#{msg.intake}" /></ui:define>
  <ui:define name="content">
  <div class="span">
    <h:form>
      <c:forEach items="#{dailyIntakeBean.currentDailyIntakeWeek}" var="intake">
      <table class="data-table">
        <tr>
          <td></td>
          <th><h:outputText value="#{intake.intakeDate}" /></th>
          <c:forEach items="#{intake.meals}" var="meal">
          <th><h:outputText value="meal.name" /></th>
          </c:forEach>
          <th><h:outputText value="#{msg.intake_ExpectedTotal}" /></th>
          <th><h:outputText value="#{msg.intake_CurrentTotal}" /></th>
          <th><h:outputText value="#{msg.intake_RemainingTotal}" /></th>
        </tr>
        <tr>
          <th><h:outputText value="#{msg.intake_Calories}" /></th>
          <ui:remove><c:forEach items="#{intake.meals}" var="meal">
          <td><h:outputText value="meal.calories" /></td>
          </c:forEach></ui:remove>
          <td><h:outputText value="#{dailyIntakeBean.calculate(intake, 'CALORIE', 'EXPECTED')}" /></td>
          <td><h:outputText value="#{dailyIntakeBean.calculate(intake, 'CALORIE', 'CURRENT')}" /></td>
          <td><h:outputText value="#{dailyIntakeBean.calculate(intake, 'CALORIE', 'REMAINING')}" /></td>
        </tr>
        <tr>
          <th><h:outputText value="#{msg.intake_Fat}" /></th>
          <ui:remove><c:forEach items="#{intake.meals}" var="meal">
          <td><h:outputText value="meal.fat" /></td>
          </c:forEach></ui:remove>
          <td><h:outputText value="#{intake.calculate(intake, 'FAT', 'EXPECTED')}" /></td>
          <td><h:outputText value="#{intake.calculate(intake, 'FAT', 'CURRENT')}" /></td>
          <td><h:outputText value="#{intake.calculate(intake, 'FAT', 'REMAINING')}" /></td>
        </tr>
        <tr>
          <th><h:outputText value="#{msg.intake_Carbs}" /></th>
          <ui:remove><c:forEach items="#{intake.meals}" var="meal">
          <td><h:outputText value="meal.carbohydrates" /></td>
          </c:forEach></ui:remove>
          <td><h:outputText value="#{intake.calculate(intake, 'CARBOHYDRATE', 'EXPECTED')}" /></td>
          <td><h:outputText value="#{intake.calculate(intake, 'CARBOHYDRATE', 'CURRENT')}" /></td>
          <td><h:outputText value="#{intake.calculate(intake, 'CARBOHYDRATE', 'REMAINING')}" /></td>
        </tr>
        <tr>
          <th><h:outputText value="#{msg.intake_Protein}" /></th>
          <ui:remove><c:forEach items="#{intake.meals}" var="meal">
          <td><h:outputText value="meal.protein" /></td>
          </c:forEach></ui:remove>
          <td><h:outputText value="#{intake.calculate(intake, 'PROTEIN', 'EXPECTED')}" /></td>
          <td><h:outputText value="#{intake.calculate(intake, 'PROTEIN', 'CURRENT')}" /></td>
          <td><h:outputText value="#{intake.calculate(intake, 'PROTEIN', 'REMAINING')}" /></td>
        </tr>
      </table>
      </c:forEach>
    </h:form>
  </div>
  </ui:define>
</ui:composition>